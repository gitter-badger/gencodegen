This is a generic code generator that I have been using in various projects. Next to the generic one, there is a Java code generator.

It keeps track of the basic block structure of code, its hierarchy and indentation, and has a pleasant lack of complexity.